
> medio@0.1.0 test:e2e
> playwright test --config=playwright.proxy.config.ts tests/e2e/auth-registration-proxy.spec.ts --grep T016


Running 1 test using 1 worker

Browser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)
Browser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)
Browser console error: Error fetching dashboard data: $
Browser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)
Browser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)
[CLEANUP] Deleting 1 test user(s)...
[CLEANUP] âœ— Failed to delete user proxy-test-1761047655850-zchorf@example.com: error: password authentication failed for user "medio"
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mpg-pool[24m\index.js:45:11
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\benja\projects\medio\[39mtests\e2e\auth-registration-proxy.spec.ts:64:11
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:326:11
    at TimeoutManager.withRunnable [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\timeoutManager.js:67:14[90m)[39m
    at TestInfoImpl._runWithTimeout [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:324:7[90m)[39m
    at FixtureRunner.resolveParametersAndRunFunction [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\fixtureRunner.js:220:5[90m)[39m
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:465:11
    at TestInfoImpl._runAsStep [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:315:7[90m)[39m
    at WorkerMain._runEachHooksForSuites [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:464:9[90m)[39m
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:326:11
    at TestInfoImpl._runAsStep [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:315:7[90m)[39m
    at WorkerMain._runTest [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:317:5[90m)[39m
    at WorkerMain.runTestGroup [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:194:11[90m)[39m
    at process.<anonymous> [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\common\process.js:65:22[90m)[39m {
  length: [33m101[39m,
  severity: [32m'FATAL'[39m,
  code: [32m'28P01'[39m,
  detail: [90mundefined[39m,
  hint: [90mundefined[39m,
  position: [90mundefined[39m,
  internalPosition: [90mundefined[39m,
  internalQuery: [90mundefined[39m,
  where: [90mundefined[39m,
  schema: [90mundefined[39m,
  table: [90mundefined[39m,
  column: [90mundefined[39m,
  dataType: [90mundefined[39m,
  constraint: [90mundefined[39m,
  file: [32m'auth.c'[39m,
  line: [32m'334'[39m,
  routine: [32m'auth_failed'[39m
}
[CLEANUP] Database connection closed
  âœ˜  1 [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:173:7 â€º Same-Origin Authentication via Proxy â€º T016: should make authenticated API call immediately after login (3.5s)


  1) [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:173:7 â€º Same-Origin Authentication via Proxy â€º T016: should make authenticated API call immediately after login 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

      206 |
      207 |     // Verify /api/auth/me was called and succeeded
    > 208 |     expect(authMeCallMade).toBe(true);
          |                            ^
      209 |     expect(authMeCallSucceeded).toBe(true);
      210 |   });
      211 |
        at C:\Users\benja\projects\medio\tests\e2e\auth-registration-proxy.spec.ts:208:28

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\auth-registration-proxy-Sa-cfe3a-all-immediately-after-login-chromium\test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\auth-registration-proxy-Sa-cfe3a-all-immediately-after-login-chromium\video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results\auth-registration-proxy-Sa-cfe3a-all-immediately-after-login-chromium\error-context.md

  1 failed
    [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:173:7 â€º Same-Origin Authentication via Proxy â€º T016: should make authenticated API call immediately after login 
