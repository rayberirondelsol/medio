
> medio@0.1.0 test:e2e
> playwright test --config=playwright.proxy.config.ts tests/e2e/auth-registration-proxy.spec.ts --reporter=line


Running 6 tests using 1 worker

[1A[2K[1/6] [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:82:7 â€º Same-Origin Authentication via Proxy â€º T013: should redirect to dashboard after successful registration
[1A[2K[chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:82:7 â€º Same-Origin Authentication via Proxy â€º T013: should redirect to dashboard after successful registration
Browser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2KBrowser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2KBrowser console error: Error fetching dashboard data: $

[1A[2KBrowser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2KBrowser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2K[CLEANUP] Deleting 1 test user(s)...

[1A[2K[CLEANUP] âœ— Failed to delete user proxy-test-1761044241835-gl65po@example.com: error: password authentication failed for user "medio"
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mpg-pool[24m\index.js:45:11
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\benja\projects\medio\[39mtests\e2e\auth-registration-proxy.spec.ts:64:11
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:326:11
    at TimeoutManager.withRunnable [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\timeoutManager.js:67:14[90m)[39m
    at TestInfoImpl._runWithTimeout [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:324:7[90m)[39m
    at FixtureRunner.resolveParametersAndRunFunction [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\fixtureRunner.js:220:5[90m)[39m
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:465:11
    at TestInfoImpl._runAsStep [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:315:7[90m)[39m
    at WorkerMain._runEachHooksForSuites [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:464:9[90m)[39m
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:326:11
    at TestInfoImpl._runAsStep [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:315:7[90m)[39m
    at WorkerMain._runTest [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:317:5[90m)[39m
    at WorkerMain.runTestGroup [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:194:11[90m)[39m
    at process.<anonymous> [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\common\process.js:65:22[90m)[39m {
  length: [33m101[39m,
  severity: [32m'FATAL'[39m,
  code: [32m'28P01'[39m,
  detail: [90mundefined[39m,
  hint: [90mundefined[39m,
  position: [90mundefined[39m,
  internalPosition: [90mundefined[39m,
  internalQuery: [90mundefined[39m,
  where: [90mundefined[39m,
  schema: [90mundefined[39m,
  table: [90mundefined[39m,
  column: [90mundefined[39m,
  dataType: [90mundefined[39m,
  constraint: [90mundefined[39m,
  file: [32m'auth.c'[39m,
  line: [32m'334'[39m,
  routine: [32m'auth_failed'[39m
}

[1A[2K[2/6] [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:106:7 â€º Same-Origin Authentication via Proxy â€º T014: should load Videos page without 401 errors after registration
[1A[2K[chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:106:7 â€º Same-Origin Authentication via Proxy â€º T014: should load Videos page without 401 errors after registration
Browser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2KBrowser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2K[CLEANUP] Deleting 1 test user(s)...

[1A[2K[CLEANUP] âœ— Failed to delete user proxy-test-1761044243396-l069vv@example.com: error: password authentication failed for user "medio"
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mpg-pool[24m\index.js:45:11
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\benja\projects\medio\[39mtests\e2e\auth-registration-proxy.spec.ts:64:11
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:326:11
    at TimeoutManager.withRunnable [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\timeoutManager.js:67:14[90m)[39m
    at TestInfoImpl._runWithTimeout [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:324:7[90m)[39m
    at FixtureRunner.resolveParametersAndRunFunction [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\fixtureRunner.js:220:5[90m)[39m
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:465:11
    at TestInfoImpl._runAsStep [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:315:7[90m)[39m
    at WorkerMain._runEachHooksForSuites [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:464:9[90m)[39m
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:326:11
    at TestInfoImpl._runAsStep [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:315:7[90m)[39m
    at WorkerMain._runTest [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:317:5[90m)[39m
    at WorkerMain.runTestGroup [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:194:11[90m)[39m
    at process.<anonymous> [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\common\process.js:65:22[90m)[39m {
  length: [33m101[39m,
  severity: [32m'FATAL'[39m,
  code: [32m'28P01'[39m,
  detail: [90mundefined[39m,
  hint: [90mundefined[39m,
  position: [90mundefined[39m,
  internalPosition: [90mundefined[39m,
  internalQuery: [90mundefined[39m,
  where: [90mundefined[39m,
  schema: [90mundefined[39m,
  table: [90mundefined[39m,
  column: [90mundefined[39m,
  dataType: [90mundefined[39m,
  constraint: [90mundefined[39m,
  file: [32m'auth.c'[39m,
  line: [32m'334'[39m,
  routine: [32m'auth_failed'[39m
}

[1A[2K[CLEANUP] Database connection closed

[1A[2K  1) [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:106:7 â€º Same-Origin Authentication via Proxy â€º T014: should load Videos page without 401 errors after registration 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoHaveLength[2m([22m[32mexpected[39m[2m)[22m

    Expected length: [32m0[39m
    Received length: [31m1[39m
    Received array:  [31m["401: http://localhost:8080/api/auth/me"][39m

      133 |
      134 |     // Verify no 401 errors occurred
    > 135 |     expect(failedRequests).toHaveLength(0);
          |                            ^
      136 |
      137 |     // Verify Videos page loaded
      138 |     await expect(page.locator('text=Videos')).toBeVisible({ timeout: 5000 });
        at C:\Users\benja\projects\medio\tests\e2e\auth-registration-proxy.spec.ts:135:28

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\auth-registration-proxy-Sa-2255d-1-errors-after-registration-chromium\test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\auth-registration-proxy-Sa-2255d-1-errors-after-registration-chromium\video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results\auth-registration-proxy-Sa-2255d-1-errors-after-registration-chromium\error-context.md


[1A[2K[3/6] [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:141:7 â€º Same-Origin Authentication via Proxy â€º T015: should maintain auth after page refresh on dashboard
[1A[2K[chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:141:7 â€º Same-Origin Authentication via Proxy â€º T015: should maintain auth after page refresh on dashboard
Browser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2KBrowser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2K[CLEANUP] Deleting 1 test user(s)...

[1A[2K[CLEANUP] âœ— Failed to delete user proxy-test-1761044246259-15454s@example.com: error: password authentication failed for user "medio"
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mpg-pool[24m\index.js:45:11
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\benja\projects\medio\[39mtests\e2e\auth-registration-proxy.spec.ts:64:11
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:326:11
    at TimeoutManager.withRunnable [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\timeoutManager.js:67:14[90m)[39m
    at TestInfoImpl._runWithTimeout [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:324:7[90m)[39m
    at FixtureRunner.resolveParametersAndRunFunction [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\fixtureRunner.js:220:5[90m)[39m
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:465:11
    at TestInfoImpl._runAsStep [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:315:7[90m)[39m
    at WorkerMain._runEachHooksForSuites [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:464:9[90m)[39m
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:326:11
    at TestInfoImpl._runAsStep [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:315:7[90m)[39m
    at WorkerMain._runTest [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:317:5[90m)[39m
    at WorkerMain.runTestGroup [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:194:11[90m)[39m
    at process.<anonymous> [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\common\process.js:65:22[90m)[39m {
  length: [33m101[39m,
  severity: [32m'FATAL'[39m,
  code: [32m'28P01'[39m,
  detail: [90mundefined[39m,
  hint: [90mundefined[39m,
  position: [90mundefined[39m,
  internalPosition: [90mundefined[39m,
  internalQuery: [90mundefined[39m,
  where: [90mundefined[39m,
  schema: [90mundefined[39m,
  table: [90mundefined[39m,
  column: [90mundefined[39m,
  dataType: [90mundefined[39m,
  constraint: [90mundefined[39m,
  file: [32m'auth.c'[39m,
  line: [32m'334'[39m,
  routine: [32m'auth_failed'[39m
}

[1A[2K[CLEANUP] Database connection closed

[1A[2K  2) [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:141:7 â€º Same-Origin Authentication via Proxy â€º T015: should maintain auth after page refresh on dashboard 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m()[22m failed

    Locator:  locator('h1').filter({ hasText: 'Dashboard' })
    Expected: visible
    Received: <element(s) not found>
    Timeout:  10000ms

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('h1').filter({ hasText: 'Dashboard' })[22m


      163 |     // Should still be on dashboard (not redirected to login)
      164 |     await expect(page).toHaveURL(/\/dashboard/, { timeout: 10000 });
    > 165 |     await expect(page.locator('h1', { hasText: 'Dashboard' })).toBeVisible();
          |                                                                ^
      166 |
      167 |     // Verify cookies still present
      168 |     const cookiesAfter = await context.cookies();
        at C:\Users\benja\projects\medio\tests\e2e\auth-registration-proxy.spec.ts:165:64

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\auth-registration-proxy-Sa-2b4e5-r-page-refresh-on-dashboard-chromium\test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\auth-registration-proxy-Sa-2b4e5-r-page-refresh-on-dashboard-chromium\video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results\auth-registration-proxy-Sa-2b4e5-r-page-refresh-on-dashboard-chromium\error-context.md


[1A[2K[4/6] [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:173:7 â€º Same-Origin Authentication via Proxy â€º T016: should make authenticated API call immediately after login
[1A[2K[chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:173:7 â€º Same-Origin Authentication via Proxy â€º T016: should make authenticated API call immediately after login
Browser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2KBrowser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2KBrowser console error: Error fetching dashboard data: $

[1A[2KBrowser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2KBrowser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2K[CLEANUP] Deleting 1 test user(s)...

[1A[2K[CLEANUP] âœ— Failed to delete user proxy-test-1761044259292-yvxy0g@example.com: error: password authentication failed for user "medio"
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mpg-pool[24m\index.js:45:11
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\benja\projects\medio\[39mtests\e2e\auth-registration-proxy.spec.ts:64:11
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:326:11
    at TimeoutManager.withRunnable [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\timeoutManager.js:67:14[90m)[39m
    at TestInfoImpl._runWithTimeout [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:324:7[90m)[39m
    at FixtureRunner.resolveParametersAndRunFunction [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\fixtureRunner.js:220:5[90m)[39m
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:465:11
    at TestInfoImpl._runAsStep [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:315:7[90m)[39m
    at WorkerMain._runEachHooksForSuites [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:464:9[90m)[39m
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:326:11
    at TestInfoImpl._runAsStep [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:315:7[90m)[39m
    at WorkerMain._runTest [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:317:5[90m)[39m
    at WorkerMain.runTestGroup [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:194:11[90m)[39m
    at process.<anonymous> [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\common\process.js:65:22[90m)[39m {
  length: [33m101[39m,
  severity: [32m'FATAL'[39m,
  code: [32m'28P01'[39m,
  detail: [90mundefined[39m,
  hint: [90mundefined[39m,
  position: [90mundefined[39m,
  internalPosition: [90mundefined[39m,
  internalQuery: [90mundefined[39m,
  where: [90mundefined[39m,
  schema: [90mundefined[39m,
  table: [90mundefined[39m,
  column: [90mundefined[39m,
  dataType: [90mundefined[39m,
  constraint: [90mundefined[39m,
  file: [32m'auth.c'[39m,
  line: [32m'334'[39m,
  routine: [32m'auth_failed'[39m
}

[1A[2K[CLEANUP] Database connection closed

[1A[2K  3) [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:173:7 â€º Same-Origin Authentication via Proxy â€º T016: should make authenticated API call immediately after login 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

      206 |
      207 |     // Verify /api/auth/me was called and succeeded
    > 208 |     expect(authMeCallMade).toBe(true);
          |                            ^
      209 |     expect(authMeCallSucceeded).toBe(true);
      210 |   });
      211 |
        at C:\Users\benja\projects\medio\tests\e2e\auth-registration-proxy.spec.ts:208:28

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\auth-registration-proxy-Sa-cfe3a-all-immediately-after-login-chromium\test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\auth-registration-proxy-Sa-cfe3a-all-immediately-after-login-chromium\video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results\auth-registration-proxy-Sa-cfe3a-all-immediately-after-login-chromium\error-context.md


[1A[2K[5/6] [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:212:7 â€º Same-Origin Authentication via Proxy â€º T017: should verify cookies are sent with proxy requests
[1A[2K[chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:212:7 â€º Same-Origin Authentication via Proxy â€º T017: should verify cookies are sent with proxy requests
Browser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2KAll cookies: [
  { name: [32m'_csrf'[39m, domain: [32m'localhost'[39m, sameSite: [32m'None'[39m },
  { name: [32m'authToken'[39m, domain: [32m'localhost'[39m, sameSite: [32m'Lax'[39m },
  { name: [32m'refreshToken'[39m, domain: [32m'localhost'[39m, sameSite: [32m'Lax'[39m }
]

[1A[2KBrowser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2K[CLEANUP] Deleting 1 test user(s)...

[1A[2K[CLEANUP] âœ— Failed to delete user proxy-test-1761044263489-9hczot@example.com: error: password authentication failed for user "medio"
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mpg-pool[24m\index.js:45:11
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\benja\projects\medio\[39mtests\e2e\auth-registration-proxy.spec.ts:64:11
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:326:11
    at TimeoutManager.withRunnable [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\timeoutManager.js:67:14[90m)[39m
    at TestInfoImpl._runWithTimeout [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:324:7[90m)[39m
    at FixtureRunner.resolveParametersAndRunFunction [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\fixtureRunner.js:220:5[90m)[39m
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:465:11
    at TestInfoImpl._runAsStep [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:315:7[90m)[39m
    at WorkerMain._runEachHooksForSuites [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:464:9[90m)[39m
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:326:11
    at TestInfoImpl._runAsStep [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:315:7[90m)[39m
    at WorkerMain._runTest [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:317:5[90m)[39m
    at WorkerMain.runTestGroup [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:194:11[90m)[39m
    at process.<anonymous> [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\common\process.js:65:22[90m)[39m {
  length: [33m101[39m,
  severity: [32m'FATAL'[39m,
  code: [32m'28P01'[39m,
  detail: [90mundefined[39m,
  hint: [90mundefined[39m,
  position: [90mundefined[39m,
  internalPosition: [90mundefined[39m,
  internalQuery: [90mundefined[39m,
  where: [90mundefined[39m,
  schema: [90mundefined[39m,
  table: [90mundefined[39m,
  column: [90mundefined[39m,
  dataType: [90mundefined[39m,
  constraint: [90mundefined[39m,
  file: [32m'auth.c'[39m,
  line: [32m'334'[39m,
  routine: [32m'auth_failed'[39m
}

[1A[2K[CLEANUP] Database connection closed

[1A[2K  4) [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:212:7 â€º Same-Origin Authentication via Proxy â€º T017: should verify cookies are sent with proxy requests 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

      256 |
      257 |     // Verify cookie was sent
    > 258 |     expect(cookieHeaderSent).toBe(true);
          |                              ^
      259 |   });
      260 |
      261 |   test('T018: Comprehensive proxy flow - registration to navigation', async ({ page, context }) => {
        at C:\Users\benja\projects\medio\tests\e2e\auth-registration-proxy.spec.ts:258:30

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\auth-registration-proxy-Sa-19a09-re-sent-with-proxy-requests-chromium\test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\auth-registration-proxy-Sa-19a09-re-sent-with-proxy-requests-chromium\video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results\auth-registration-proxy-Sa-19a09-re-sent-with-proxy-requests-chromium\error-context.md


[1A[2K[6/6] [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:261:7 â€º Same-Origin Authentication via Proxy â€º T018: Comprehensive proxy flow - registration to navigation
[1A[2K[chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:261:7 â€º Same-Origin Authentication via Proxy â€º T018: Comprehensive proxy flow - registration to navigation
Browser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2KBrowser console error: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2K[CLEANUP] Deleting 1 test user(s)...

[1A[2K[CLEANUP] âœ— Failed to delete user proxy-test-1761044266362-c531bm@example.com: error: password authentication failed for user "medio"
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mpg-pool[24m\index.js:45:11
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\benja\projects\medio\[39mtests\e2e\auth-registration-proxy.spec.ts:64:11
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:326:11
    at TimeoutManager.withRunnable [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\timeoutManager.js:67:14[90m)[39m
    at TestInfoImpl._runWithTimeout [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:324:7[90m)[39m
    at FixtureRunner.resolveParametersAndRunFunction [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\fixtureRunner.js:220:5[90m)[39m
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:465:11
    at TestInfoImpl._runAsStep [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:315:7[90m)[39m
    at WorkerMain._runEachHooksForSuites [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:464:9[90m)[39m
    at [90mC:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:326:11
    at TestInfoImpl._runAsStep [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\testInfo.js:315:7[90m)[39m
    at WorkerMain._runTest [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:317:5[90m)[39m
    at WorkerMain.runTestGroup [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\worker\workerMain.js:194:11[90m)[39m
    at process.<anonymous> [90m(C:\Users\benja\projects\medio\[39mnode_modules\[4mplaywright[24m\lib\common\process.js:65:22[90m)[39m {
  length: [33m101[39m,
  severity: [32m'FATAL'[39m,
  code: [32m'28P01'[39m,
  detail: [90mundefined[39m,
  hint: [90mundefined[39m,
  position: [90mundefined[39m,
  internalPosition: [90mundefined[39m,
  internalQuery: [90mundefined[39m,
  where: [90mundefined[39m,
  schema: [90mundefined[39m,
  table: [90mundefined[39m,
  column: [90mundefined[39m,
  dataType: [90mundefined[39m,
  constraint: [90mundefined[39m,
  file: [32m'auth.c'[39m,
  line: [32m'334'[39m,
  routine: [32m'auth_failed'[39m
}

[1A[2K[CLEANUP] Database connection closed

[1A[2K  5) [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:261:7 â€º Same-Origin Authentication via Proxy â€º T018: Comprehensive proxy flow - registration to navigation 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoHaveLength[2m([22m[32mexpected[39m[2m)[22m

    Expected length: [32m0[39m
    Received length: [31m1[39m
    Received array:  [31m["http://localhost:8080/api/auth/me"][39m

      284 |     await page.goto(`${PROXY_URL}/videos`);
      285 |     await page.waitForLoadState('networkidle');
    > 286 |     expect(responses401).toHaveLength(0);
          |                          ^
      287 |
      288 |     // 4. Refresh and stay authenticated
      289 |     await page.reload();
        at C:\Users\benja\projects\medio\tests\e2e\auth-registration-proxy.spec.ts:286:26

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\auth-registration-proxy-Sa-6d433--registration-to-navigation-chromium\test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\auth-registration-proxy-Sa-6d433--registration-to-navigation-chromium\video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results\auth-registration-proxy-Sa-6d433--registration-to-navigation-chromium\error-context.md


[1A[2K  5 failed
    [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:106:7 â€º Same-Origin Authentication via Proxy â€º T014: should load Videos page without 401 errors after registration 
    [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:141:7 â€º Same-Origin Authentication via Proxy â€º T015: should maintain auth after page refresh on dashboard 
    [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:173:7 â€º Same-Origin Authentication via Proxy â€º T016: should make authenticated API call immediately after login 
    [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:212:7 â€º Same-Origin Authentication via Proxy â€º T017: should verify cookies are sent with proxy requests 
    [chromium] â€º tests\e2e\auth-registration-proxy.spec.ts:261:7 â€º Same-Origin Authentication via Proxy â€º T018: Comprehensive proxy flow - registration to navigation 
  1 passed (27.6s)
